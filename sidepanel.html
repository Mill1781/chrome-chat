<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Gemini Chat</title>
    <link rel="stylesheet" href="styles.css" />
    <!-- Markdown parsing library -->
    <script src="marked.min.js"></script>
    <!-- Highlight.js for code highlighting -->
    <link rel="stylesheet" href="github-dark.min.css">
    <script src="highlight.min.js"></script>
</head>

<body>
    <div id="app">
        <header>
            <h1>Gemini Chat</h1>
            <button id="settings-btn" title="Settings">
                <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" width="20"
                    fill="currentColor">
                    <path
                        d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-1 13.5l103 78-110 190-119-50q-11 8-23 15t-24 12l-16 128H370Zm112-260q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm0-80q-25 0-42.5-17.5T422-480q0-25 17.5-42.5T482-540q25 0 42.5 17.5T542-480q0 25-17.5 42.5T482-420Z" />
                </svg>
            </button>
        </header>

        <div id="chat-container">
            <!-- Messages will appear here -->
            <div class="message system">
                Welcome! Please set your API Key in settings to start chatting.
            </div>
        </div>

        <div id="input-area">
            <textarea id="prompt-input" placeholder="Ask Gemini..."></textarea>
            <button id="send-btn">
                <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"
                    fill="currentColor">
                    <path
                        d="M120-160v-640l760 320-760 320Zm80-120 474-200-474-200v140l240 60-240 60v140Zm0 0v-400 400Z" />
                </svg>
            </button>
        </div>

        <div id="settings-modal" class="hidden">
            <div class="modal-content">
                <h2>Settings</h2>
                <label for="api-key-input">Gemini API Key</label>
                <input type="password" id="api-key-input" placeholder="Paste key here" />

                <label for="model-select">Model</label>
                <select id="model-select">
                    <option value="gemini-2.5-flash" selected>Gemini 2.5 Flash</option>
                    <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
                    <option value="gemini-2.0-flash">Gemini 2.0 Flash</option>
                    <option value="gemini-3-pro-preview">Gemini 3 Pro Preview</option>
                    <option value="gemini-3-flash-preview">Gemini 3 Flash Preview</option>
                    <option value="gemini-3-pro-image-preview">Gemini 3 Pro Image Preview</option>
                </select>

                <div class="setting-item">
                    <label for="page-context-toggle" style="margin-bottom: 0; flex: 1;">Read Page Content</label>
                    <button id="page-context-toggle" class="toggle-switch" aria-checked="true" role="switch">
                        <span class="slider"></span>
                    </button>
                </div>

                <button id="clear-history-btn">Clear History</button>
                <div class="button-group">
                    <button id="save-key-btn">Save</button>
                    <button id="close-settings-btn" class="secondary">Close</button>
                </div>
            </div>
        </div>
    </div>
    <script src="sidepanel.js"></script>
</body>

</html>